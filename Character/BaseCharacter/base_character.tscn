[gd_scene load_steps=55 format=3 uid="uid://heyuc5y56gf8"]

[ext_resource type="PackedScene" uid="uid://u10wuqaym4wq" path="res://Character/BaseCharacter/BaseCharacter.glb" id="1_84i06"]
[ext_resource type="Script" path="res://Character/BaseCharacter/base_character.gd" id="2_uy0i3"]
[ext_resource type="PackedScene" uid="uid://crrmxxear2ixe" path="res://Weapons/test_sword.tscn" id="3_74nd7"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mqyws"]
animation = &"backstep"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y3203"]
animation = &"falling"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_orbf7"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tkyhw"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6ibnl"]
animation = &"jumping"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_db1qv"]
animation = &"medium_fall_landing"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sy1s3"]
animation = &"post_jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rfj5x"]
animation = &"run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tbi72"]
animation = &"short_fall_landing"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1uenr"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_v8584"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1jyxv"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_s1uly"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lnwkt"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_28d1d"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eoe7b"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fayu4"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i8yds"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_u1ijp"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_h7hr4"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ru3pf"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sc5m7"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4yxyx"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_l20rx"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mp6yn"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kq1tx"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vcoan"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ym5ve"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vbxws"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4cje2"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4ou8l"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_q08rw"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_o6ewu"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gkqms"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_2btfi"]
states/End/position = Vector2(1265.5, 148)
states/backstep/node = SubResource("AnimationNodeAnimation_mqyws")
states/backstep/position = Vector2(771, 83.5)
states/falling/node = SubResource("AnimationNodeAnimation_y3203")
states/falling/position = Vector2(312.5, 460.5)
states/idle/node = SubResource("AnimationNodeAnimation_orbf7")
states/idle/position = Vector2(359, 100)
states/jump/node = SubResource("AnimationNodeAnimation_tkyhw")
states/jump/position = Vector2(770, 299.5)
states/jumping/node = SubResource("AnimationNodeAnimation_6ibnl")
states/jumping/position = Vector2(490.5, 533)
states/medium_fall_landing/node = SubResource("AnimationNodeAnimation_db1qv")
states/medium_fall_landing/position = Vector2(176, 292.5)
states/post_jump/node = SubResource("AnimationNodeAnimation_sy1s3")
states/post_jump/position = Vector2(716.25, 470)
states/run/node = SubResource("AnimationNodeAnimation_rfj5x")
states/run/position = Vector2(940, -121.5)
states/short_fall_landing/node = SubResource("AnimationNodeAnimation_tbi72")
states/short_fall_landing/position = Vector2(434, 284.5)
states/walk/node = SubResource("AnimationNodeAnimation_1uenr")
states/walk/position = Vector2(465.5, -153.5)
transitions = ["jump", "post_jump", SubResource("AnimationNodeStateMachineTransition_v8584"), "post_jump", "jumping", SubResource("AnimationNodeStateMachineTransition_1jyxv"), "short_fall_landing", "idle", SubResource("AnimationNodeStateMachineTransition_s1uly"), "medium_fall_landing", "idle", SubResource("AnimationNodeStateMachineTransition_lnwkt"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_28d1d"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_eoe7b"), "walk", "run", SubResource("AnimationNodeStateMachineTransition_fayu4"), "run", "walk", SubResource("AnimationNodeStateMachineTransition_i8yds"), "run", "backstep", SubResource("AnimationNodeStateMachineTransition_u1ijp"), "backstep", "run", SubResource("AnimationNodeStateMachineTransition_h7hr4"), "backstep", "walk", SubResource("AnimationNodeStateMachineTransition_ru3pf"), "walk", "backstep", SubResource("AnimationNodeStateMachineTransition_sc5m7"), "idle", "backstep", SubResource("AnimationNodeStateMachineTransition_4yxyx"), "backstep", "idle", SubResource("AnimationNodeStateMachineTransition_l20rx"), "run", "idle", SubResource("AnimationNodeStateMachineTransition_mp6yn"), "idle", "run", SubResource("AnimationNodeStateMachineTransition_kq1tx"), "idle", "jump", SubResource("AnimationNodeStateMachineTransition_vcoan"), "backstep", "jump", SubResource("AnimationNodeStateMachineTransition_ym5ve"), "run", "jump", SubResource("AnimationNodeStateMachineTransition_vbxws"), "walk", "jump", SubResource("AnimationNodeStateMachineTransition_4cje2"), "jumping", "falling", SubResource("AnimationNodeStateMachineTransition_4ou8l"), "falling", "short_fall_landing", SubResource("AnimationNodeStateMachineTransition_q08rw"), "falling", "medium_fall_landing", SubResource("AnimationNodeStateMachineTransition_o6ewu"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_gkqms")]
graph_offset = Vector2(-49, 66)

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_gu05x"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_35m01"]
filter_enabled = true
filters = ["Skeleton/Skeleton3D:Fingers L", "Skeleton/Skeleton3D:Lower Arm L", "Skeleton/Skeleton3D:Palm L", "Skeleton/Skeleton3D:Thumb 2 L", "Skeleton/Skeleton3D:Thumb L", "Skeleton/Skeleton3D:Upper Arm L"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_51fi7"]
animation = &"sword_right_hand_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_eqend"]
animation = &"sword_right_hand_slash1"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bo0x7"]
animation = &"sword_right_hand_slash2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7f2ac"]
animation = &"sword_right_hand_thrust"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_svlk8"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jwcbn"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yacpu"]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nh0gd"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xgg6u"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6ityx"]
xfade_time = 0.5
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sb5x3"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_kmj1k"]
states/Start/position = Vector2(147, 77.25)
states/sword_right_hand_idle/node = SubResource("AnimationNodeAnimation_51fi7")
states/sword_right_hand_idle/position = Vector2(370.5, 52)
states/sword_right_hand_slash1/node = SubResource("AnimationNodeAnimation_eqend")
states/sword_right_hand_slash1/position = Vector2(626.5, -65)
states/sword_right_hand_slash2/node = SubResource("AnimationNodeAnimation_bo0x7")
states/sword_right_hand_slash2/position = Vector2(899.5, -51)
states/sword_right_hand_thrust/node = SubResource("AnimationNodeAnimation_7f2ac")
states/sword_right_hand_thrust/position = Vector2(587, 151)
transitions = ["Start", "sword_right_hand_idle", SubResource("AnimationNodeStateMachineTransition_svlk8"), "sword_right_hand_idle", "sword_right_hand_slash1", SubResource("AnimationNodeStateMachineTransition_jwcbn"), "sword_right_hand_slash1", "sword_right_hand_idle", SubResource("AnimationNodeStateMachineTransition_yacpu"), "sword_right_hand_slash1", "sword_right_hand_slash2", SubResource("AnimationNodeStateMachineTransition_nh0gd"), "sword_right_hand_idle", "sword_right_hand_thrust", SubResource("AnimationNodeStateMachineTransition_xgg6u"), "sword_right_hand_slash2", "sword_right_hand_idle", SubResource("AnimationNodeStateMachineTransition_6ityx"), "sword_right_hand_thrust", "sword_right_hand_idle", SubResource("AnimationNodeStateMachineTransition_sb5x3")]
graph_offset = Vector2(-59, -133)

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_jcqj7"]
filter_enabled = true
filters = ["Skeleton/Skeleton3D:Fingers R", "Skeleton/Skeleton3D:Lower Arm R", "Skeleton/Skeleton3D:Palm R", "Skeleton/Skeleton3D:Thumb 2 R", "Skeleton/Skeleton3D:Thumb R", "Skeleton/Skeleton3D:Upper Arm R", "Skeleton/Skeleton3D:Wrist R"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_e0clx"]
graph_offset = Vector2(-5, -86.5)
nodes/Body/node = SubResource("AnimationNodeStateMachine_2btfi")
nodes/Body/position = Vector2(250, 0)
nodes/LeftArm/node = SubResource("AnimationNodeStateMachine_gu05x")
nodes/LeftArm/position = Vector2(250, 280)
nodes/LeftArmOneShot/node = SubResource("AnimationNodeOneShot_35m01")
nodes/LeftArmOneShot/position = Vector2(660, 50)
nodes/RightArm/node = SubResource("AnimationNodeStateMachine_kmj1k")
nodes/RightArm/position = Vector2(390, 430)
nodes/RightArmOneShot/node = SubResource("AnimationNodeOneShot_jcqj7")
nodes/RightArmOneShot/position = Vector2(901.79, 193.694)
nodes/output/position = Vector2(1160, 180)
node_connections = [&"LeftArmOneShot", 0, &"Body", &"LeftArmOneShot", 1, &"LeftArm", &"RightArmOneShot", 0, &"LeftArmOneShot", &"RightArmOneShot", 1, &"RightArm", &"output", 0, &"RightArmOneShot"]

[node name="BaseCharacter" instance=ExtResource("1_84i06")]
script = ExtResource("2_uy0i3")

[node name="Skeleton3D" parent="Skeleton" index="0"]
bones/0/rotation = Quaternion(-0.472908, -0.499265, -0.499266, 0.527092)
bones/1/rotation = Quaternion(-0.62958, 0.141819, -0.0549453, 0.761904)
bones/2/rotation = Quaternion(-0.0207403, 0.00257478, -0.209011, 0.97769)
bones/4/rotation = Quaternion(-0.151659, -0.150062, 0.006846, 0.976951)
bones/5/rotation = Quaternion(-0.0139495, -0.0139425, 0.00245347, 0.999802)
bones/6/rotation = Quaternion(0.660071, 0.688141, 0.123234, -0.274921)
bones/7/scale = Vector3(1, 1, 1)
bones/8/position = Vector3(7.06183e-19, -0.0716233, 0.0189946)
bones/9/rotation = Quaternion(0.477198, -3.90282e-16, -2.77521e-16, 0.878796)
bones/11/rotation = Quaternion(0.0558623, 2.93275e-17, 2.33202e-17, 0.998438)
bones/12/rotation = Quaternion(0.278627, 3.44515e-24, -6.18675e-17, 0.9604)
bones/13/rotation = Quaternion(-0.183306, 1.29492e-16, 1.29492e-16, 0.983056)
bones/14/rotation = Quaternion(0.997089, 0.0118273, -0.00524782, -0.0751353)
bones/14/scale = Vector3(1, 0.999999, 0.999985)
bones/15/rotation = Quaternion(0.117546, 0.00966608, -0.00805886, 0.992988)
bones/15/scale = Vector3(1, 1, 1)
bones/16/rotation = Quaternion(0.121519, -0.0148024, 0.02313, 0.992209)
bones/16/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(-0.815486, 0.000333037, 0.00263705, 0.57877)
bones/18/rotation = Quaternion(0.012926, 2.66891e-14, 1.05361e-14, 0.999916)
bones/19/rotation = Quaternion(0.997091, -0.0118267, 0.00524746, -0.0751181)
bones/19/scale = Vector3(1, 0.999999, 0.999985)
bones/20/rotation = Quaternion(0.117546, -0.00966608, 0.00805885, 0.992988)
bones/20/scale = Vector3(1, 1, 1)
bones/21/rotation = Quaternion(0.121519, 0.0148024, -0.0231299, 0.992209)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(-0.815487, -0.000333037, -0.00263705, 0.57877)
bones/23/rotation = Quaternion(0.012926, -2.66891e-14, -1.05361e-14, 0.999916)
bones/24/rotation = Quaternion(-0.472908, 0.499265, 0.499266, 0.527092)
bones/25/rotation = Quaternion(-0.629811, -0.133487, 0.0641399, 0.7625)
bones/26/rotation = Quaternion(-0.0181461, -0.00258868, 0.182867, 0.982967)
bones/28/rotation = Quaternion(-0.151659, 0.150062, -0.006846, 0.976951)
bones/29/rotation = Quaternion(-0.0139495, 0.0139425, -0.00245347, 0.999802)
bones/30/rotation = Quaternion(-0.660071, 0.688141, 0.123234, 0.274921)
bones/31/rotation = Quaternion(0.177418, -0.46955, 0.0339229, 0.864231)

[node name="RightHandAttachment" type="BoneAttachment3D" parent="Skeleton/Skeleton3D" index="1"]
transform = Transform3D(-0.260122, -0.0886403, -0.961498, -0.0770486, -0.990697, 0.112177, -0.962497, 0.103262, 0.250873, -0.507777, -0.166853, 0.0715561)
bone_name = "Palm R"
bone_idx = 28

[node name="RightHandContainer" type="Node3D" parent="Skeleton/Skeleton3D/RightHandAttachment" index="0"]

[node name="Node3D" type="Node3D" parent="Skeleton/Skeleton3D/RightHandAttachment/RightHandContainer" index="0"]
transform = Transform3D(0.450231, -0.8741, 0.182319, -0.317076, -0.347387, -0.882488, 0.834719, 0.339515, -0.433561, -0.240499, -0.0996894, 0.0373949)

[node name="test_sword" parent="Skeleton/Skeleton3D/RightHandAttachment/RightHandContainer/Node3D" index="0" instance=ExtResource("3_74nd7")]

[node name="LeftHandAttachment" type="BoneAttachment3D" parent="Skeleton/Skeleton3D" index="2"]

[node name="LeftHandContainer" type="Node3D" parent="Skeleton/Skeleton3D/LeftHandAttachment" index="0"]

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_e0clx")
anim_player = NodePath("../AnimationPlayer")
parameters/LeftArmOneShot/active = false
parameters/LeftArmOneShot/internal_active = false
parameters/LeftArmOneShot/request = 0
parameters/RightArmOneShot/active = false
parameters/RightArmOneShot/internal_active = false
parameters/RightArmOneShot/request = 0

[connection signal="animation_finished" from="AnimationTree" to="." method="emit_animation_finished"]
